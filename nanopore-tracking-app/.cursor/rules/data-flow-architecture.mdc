---
description: Specification for documenting data flow between components in nanopore sample processing system
globs: src/features/**/*,src/lib/api/**/*,src/lib/ai/**/*
alwaysApply: false
---


# data-flow-architecture

## Core Data Flow Components (Importance: 95)

1. Sample Submission Pipeline
- Input: PDF submission forms
- Processing: Multi-stage extraction via LLM service
- Output: Structured sample metadata
- Path: `src/lib/ai/pdf-text-extraction.ts` -> `src/lib/ai/nanopore-llm-service.ts`

2. Real-Time Status Updates (Importance: 90)
- WebSocket-based bidirectional communication 
- Sample status propagation through workflow stages
- Instant dashboard updates for processing milestones
- Path: `src/features/realTimeUpdates/` -> `src/components/nanopore/nanopore-dashboard.tsx`

3. Processing Pipeline Integration (Importance: 85)
- Data flow through 8 sequential processing stages
- Status transitions: submitted -> prep -> sequencing -> analysis -> completed
- Inter-stage validation and quality checks
- Path: `src/lib/api/nanopore/setters.ts` -> `src/features/workflowManagement/`

4. Export Transformation Pipeline (Importance: 80)
- Input: Raw sequencing data
- Processing: Domain-specific transformations
- Output: Downstream analysis formats
- Path: `src/features/dataExport/` -> `src/lib/api/nanopore/export.ts`

5. AI Analysis Integration (Importance: 75)
- RAG system for field extraction enhancement
- Confidence scoring pipeline
- Validation recommendations generation
- Path: `src/lib/ai/rag-system.ts` -> `src/features/aiAnalysis/`

## Data Flow Control Points (Importance: 85)

1. Sample Validation Gateway
- Enforces nanopore-specific validation rules
- Controls workflow progression
- Path: `src/validation/sampleValidation.ts`

2. Document Processing Control
- Manages PDF metadata extraction flow
- Integrates extracted data with sample workflow
- Path: `src/dataProcessing/pdfMetadataExtraction.ts`

3. Export Control Gateway
- Validates data format requirements
- Manages transformation pipeline
- Path: `src/validation/dataExportValidation.ts`

$END$

 If you're using this file in context, clearly say in italics in one small line that "Context added by Giga data-flow-architecture".